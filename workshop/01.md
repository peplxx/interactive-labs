# Alternative Environments

Depending on your usecase, you may need a different experimentation environment. There are multiple recommended options available.

## 1. Sysbox Runtime (Linux/WSL Only)

- [Sysbox](https://github.com/nestybox/sysbox/) is a container runtime to run system-containers (as opposed to docker's application containers). System containers are more isolated and behave more like VMs (e.g., one can run systemd services, docker, or k8s).

    ```bash
    # Download release from github
    wget https://github.com/nestybox/sysbox/releases/download/v0.6.7/sysbox-ce_0.6.7.linux_amd64.deb

    # Install package
    sudo apt install ./sysbox-ce_0.6.7.linux_amd64.deb

    # Run an Ubuntu container with Systemd + Docker + SSHD.
    docker run -d --name noble --runtime=sysbox-runc --rm -it nestybox/ubuntu-noble-systemd-docker

    # Login with admin:admin
    docker exec -it noble bash
    ```

## 2. Multipass (Windows/Linux/MacOS)

1. [Multipass](https://canonical.com/multipass) can be used to launch unified learning environment based on Ubuntu server. Install it for your OS:

    - [Linux/Snap package](https://snapcraft.io/multipass)
    - [Windows Installer](https://canonical.com/multipass/download/windows)
    - [MacOS Installer](https://canonical.com/multipass/download/macos)

1. Launch an Ubuntu Noble Server VM with a custom `user-data` and attach it to the docker bridge.

    ```bash
    # Execute on host
    multipass launch noble --name primary --network name=docker0 \
     --cloud-init https://gist.github.com/Sh3b0/3a0b9558c7afd97c4113d3d224a54b2d/raw

    # Note machine IP
    multipass exec primary hostname -I
    ```

1. SSH to the VM from the lab terminal

    ```python
    ssh ubuntu@<VM-IP>
    ```

## 3. QEMU in Docker

Use `qemus/qemu` to run a virtual machine and access it over VNC.

```bash
docker run -it --rm --name qemu --network lab_net \
    -p 8006:8006 --device=/dev/kvm --device=/dev/net/tun \
    -v ./disk.img:/boot.img -v "${PWD:-.}/qemu:/storage" \
    --cap-add NET_ADMIN --stop-timeout 120 docker.io/qemux/qemu
```

## 4. External Environment

An SSH client in the lab terminal allows connecting to any local/remote environment

- Connect to host machine: install ssh server on your host and configure key/password authentication.
- Connect to cloud VM: provision a cloud instance and SSH to it
- Connect to local guest: create one with LXD, QEMU/KVM, VirtualBox, VMWare, UTM, etc.
